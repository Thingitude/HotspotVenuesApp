<template name="mainLayout">
  <body>
    <div class="container-fluid">
      <header>
        <h1>Hotspot venues {{incompleteCount}}</h1>
   
        {{> loginButtons}}
   
      </header>
      <main>
        {{#if currentUser}}
          {{>Template.dynamic template=content}}
        {{else}}
          <p>Please sign in or create an account</p>
        {{/if}}
      </main>
    </div>
  </body>
</template>

<template name="VenueList">
  <h2>Venue list ({{incompleteCount}})</h2>
  <a type="button" name="addVenueBtn" class="btn btn-default" href="addvenue">
  <span class="glyphicon glyphicon-plus" aria-hidden="true"></span> Add a venue
  </a>
  <div class="table">
    <table class="table">
      <thead>
        <tr><th>Venue</th><th>Description</th><th>Stats / Edit</th></tr>
      </thead>
      <tbody>
        {{#each venues}}
          <tr><td>{{name}}</td><td>{{description}}</td><td>
          <a type="button" class="btn btn-default" href="venue/{{this._id}}">
          <span class="glyphicon glyphicon-stats" aria-hidden="true"></span></a>
          <a type="button" class="btn btn-default" href="/editvenue/{{this._id}}">
          <span class="glyphicon glyphicon-pencil" aria-hidden="true"></span></a></td></tr>
        {{/each}}
      </tbody>
    </table>
  </div>
</template>

<template name="AddVenue">
  <h2>Add venue</h2>
  <form class="add-venue form-horizontal">
    <div class="form-group">
      <label for="venueName" class="col-sm-2 control-label">Venue name</label>
      <div class="col-sm-10">
        <input class="form-control" type="text" name="venueName" placeholder="The name of your venue" />
      </div>
    </div>
    <div class="form-group">
      <label for="venueDescription" class="col-sm-2 control-label">Description</label>
      <div class="col-sm-10">
        <textarea class="form-control" type="text" name="venueDescription" placeholder="Brief description"></textarea>
      </div>
    </div>
    <div class="form-group">
      <label for="venueSensorId" class="col-sm-2 control-label">Sensor ID</label>
      <div class="col-sm-10">
        <input class="form-control" type="text" name="venueSensorId" placeholder="Your device EUI" />
      </div>
    </div>
    <div class="form-group">
      <label for="venueLogStart" class="col-sm-2 control-label">Log stats between</label>
      <div class="col-sm-5">
        <input class="form-control" type="text" name="venueLogStart" placeholder="Start time HH:MM" />
      </div>
      <div class="col-sm-5">
        <input class="form-control" type="text" name="venueLogEnd" placeholder="Stop time HH:MM" />
      </div>
    </div>
    <div class="form-group">
      <label for="venueLatitiude" class="col-sm-2 control-label">Latitude and Longitude</label>
      <div class="col-sm-5">
        <input class="form-control" type="text" name="venueLatitude" placeholder="Get your latitude from Google maps" />
      </div>
      <div class="col-sm-5">
        <input class="form-control" type="text" name="venueLongitude" placeholder="Get your longitude from Google maps" />
      </div>
    </div>
    <div class="form-group">
      <label for="venueOpeningHours" class="col-sm-2 control-label">Opening hours</label>
      <div class="col-sm-10">
        <input class="form-control" type="text" name="venueOpeningHours" placeholder="e.g. Mon-Fri 12-10pm, Sat 10am-midnight, closed Sun" />
      </div>
    </div>
    <div class="form-group">
      <label for="venuePhone" class="col-sm-2 control-label">Phone:</label>
      <div class="col-sm-10">
        <input class="form-control" type="text" name="venuePhone" placeholder="Venue phone number" />
      </div>
    </div>
    <div class="form-group">
      <label for="venueWebsite" class="col-sm-2 control-label">Link to your website</label>
      <div class="col-sm-10">
        <input class="form-control" type="url" name="venueWebsite" placeholder="Full URL (include http://)" />
      </div>
    </div>
    <div class="form-group">
      <label for="venueBooking" class="col-sm-2 control-label">Link to your booking/reservations</label>
      <div class="col-sm-10">
        <input class="form-control" type="url" name="venueBooking" placeholder="Full URL or leave blank" />
      </div>
    </div>
    <div class="form-group">
      <label for="venueNews" class="col-sm-2 control-label">Link to your news/reviews</label>
      <div class="col-sm-10">
        <input class="form-control" type="url" name="venueNews" placeholder="Full URL or leave blank" />
      </div>
    </div>
    <div class="form-group">
      <div class="col-sm-offset-2 col-sm-10">
        <input class="btn btn-primary" type="submit" value="Save">  <a href="/" class="btn btn-default">Cancel</a>
      </div>
    </div>
   </form>
 </template>

<template name="EditVenue">
{{#with thisVenue}}
  <h2>Edit venue</h2>
  <form class="edit-venue form-horizontal">
    <div class="form-group">
      <label for="venueName" class="col-sm-2 control-label">Venue name</label>
      <div class="col-sm-10">
        <input class="form-control" type="text" name="venueName" value={{name}} />
      </div>
    </div>
    <div class="form-group">
      <label for="venueDescription" class="col-sm-2 control-label">Description</label>
      <div class="col-sm-10">
        <textarea class="form-control" type="text" name="venueDescription" value={{description}}></textarea>
      </div>
    </div>
    <div class="form-group">
      <label for="venueSensorId" class="col-sm-2 control-label">Sensor ID</label>
      <div class="col-sm-10">
        <input class="form-control" type="text" name="venueSensorId" value={{sensorId}} />
      </div>
    </div>
    <div class="form-group">
      <label for="venueLogStart" class="col-sm-2 control-label">Log stats between</label>
      <div class="col-sm-5">
        <input class="form-control" type="text" name="venueLogStart" value={{logStart}} />
      </div>
      <div class="col-sm-5">
        <input class="form-control" type="text" name="venueLogEnd" value={{logEnd}} />
      </div>
    </div>
    <div class="form-group">
      <label for="venueLatitiude" class="col-sm-2 control-label">Latitude and Longitude</label>
      <div class="col-sm-5">
        <input class="form-control" type="text" name="venueLatitude" value={{latitude}} />
      </div>
      <div class="col-sm-5">
        <input class="form-control" type="text" name="venueLongitude" value={{longitude}} />
      </div>
    </div>
    <div class="form-group">
      <label for="venueOpeningHours" class="col-sm-2 control-label">Opening hours</label>
      <div class="col-sm-10">
        <input class="form-control" type="text" name="venueOpeningHours" value={{openingHours}} />
      </div>
    </div>
    <div class="form-group">
      <label for="venuePhone" class="col-sm-2 control-label">Phone:</label>
      <div class="col-sm-10">
        <input class="form-control" type="text" name="venuePhone" value={{phone}} />
      </div>
    </div>
    <div class="form-group">
      <label for="venueWebsite" class="col-sm-2 control-label">Link to your website</label>
      <div class="col-sm-10">
        <input class="form-control" type="url" name="venueWebsite" value={{websiteURL}} />
      </div>
    </div>
    <div class="form-group">
      <label for="venueBooking" class="col-sm-2 control-label">Link to your booking/reservations</label>
      <div class="col-sm-10">
        <input class="form-control" type="url" name="venueBooking" value={{bookingURL}} />
      </div>
    </div>
    <div class="form-group">
      <label for="venueNews" class="col-sm-2 control-label">Link to your news/reviews</label>
      <div class="col-sm-10">
        <input class="form-control" type="url" name="venueNews" value={{newsURL}} />
      </div>
    </div>
    <div class="form-group">
      <div class="col-sm-offset-2 col-sm-10">
        <input class="btn btn-primary" type="submit" value="Update">  <a href="/venue/{{_id}}" class="btn btn-default">Cancel</a>
      </div>
    </div>
   </form>

{{/with}}
</template>

<template name="VenueNavBar">
    <nav class="navbar navbar-default">
      <div class="container-fluid">
        <div class="navbar-header">
          <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1" aria-expanded="false">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </button>
        </div>
        <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
          <ul class=" nav navbar-nav">
            <li class="dropdown">
              <a href="#" role="button" class="dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">Time frame<span class="caret"></span></a>
              <ul class="dropdown-menu">
                <li><a href="/venue/{{_id}}">Today</a></li>
                <li><a href="/venue/{{_id}}/w">This week</a></li>
                <li><a href="/venue/{{_id}}/m">This month</a></li>
                <li><a href="/venue/{{_id}}/x">Custom dates</a></li>
              </ul>
            </li>
          </ul>
          <ul class="nav navbar-nav">
            <li><a role="button"  href="/editvenue/{{_id}}">Edit venue</a></li>
            <li><a href="/venueevents/{{_id}}">List events</a></li>
          </ul>
          <ul class="nav navbar-nav navbar-right">
            <li><a href="/">Return to venue list</a></li>
          </ul>
        </div>
      </div><!-- /.container-fluid -->
    </nav>
</template>


<template name="VenueD">
  {{#with thisVenue}}
    <h2>{{name}} </h2>
    <h3>"{{description}}"</h3>
    {{>VenueNavBar}}
    <div id="chart">
      {{barChartDaily}}
    </div>
  {{/with}}
</template>

<template name="VenueW">
  {{#with thisVenue}}
    <h2>{{name}} </h2>
    <h3>"{{description}}"</h3>
    {{>VenueNavBar}}
    <div id="chart">
      {{barChartWeek}}
    </div>
  {{/with}}
</template>

<template name="VenueM">
  {{#with thisVenue}}
    <h2>{{name}} </h2>
    <h3>"{{description}}"</h3>
    {{>VenueNavBar}}
    <div id="chart">
      {{barChartMonth}}
    </div>
  {{/with}}
</template>

<template name="VenueX">
  {{#with thisVenue}}
    <h2>{{name}} </h2>
    <h3>"{{description}}"</h3>
    {{>VenueNavBar}}
    <form class="set-date-range form-horizontal">
      <input class="hidden" type="hidden" name="venueId" value={{venueId}} />
      <input class="hidden" type="hidden" name="sensorId" value={{sensorId}} />
      <div class="form-group">
        <label for="startDate" class="col-sm-2 control-label">Start date</label>
        <div class="col-sm-2">
          {{#datetimepicker format='YYYY-MM-DD' keepOpen=false viewMode='days'}}
            <input class="form-control" type="text" name="startDate" value={{thisStartDate}} />
          {{/datetimepicker}}
        </div>
        <label for="endDate" class="col-sm-1 control-label">End date</label>
        <div class="col-sm-2">
          {{#datetimepicker format='YYYY-MM-DD' keepOpen=false viewMode='days'}}
            <input class="form-control" type="text" name="endDate" value={{thisEndDate}} />
          {{/datetimepicker}}
        </div>
        <div class="col-sm-2 ">
          <input class="btn btn-primary" type="submit" value="Show"> 
        </div>
      </div>
    </form>  
    
    <div id="chart">
      {{barChartCustom}}
    </div>
  {{/with}}
</template>


<template name="EditEvent">
{{#with thisEvent}}
  <h2>Edit Event</h2>
  <form class="edit-event form-horizontal">
  <input class="hidden" type="hidden" name="venueId" value={{venueId}} />
    <div class="form-group">
      <label for="eventName" class="col-sm-2 control-label">Event name</label>
      <div class="col-sm-10">
        <input class="form-control" type="text" name="eventName" value={{name}} />
      </div>
    </div>
    <div class="form-group">
      <label for="eventDescription" class="col-sm-2 control-label">Description</label>
      <div class="col-sm-10">
        <input class="form-control" type="text" name="eventDescription" value={{description}} />
      </div>
    </div>
    <div class="form-group">
      <label for="eventStartDate" class="col-sm-2 control-label">Start date/time</label>
      <div class="col-sm-5">
        <input class="form-control" type="text" name="eventStartDate" value={{startDate}} />
      </div>
      <div class="col-sm-5">
        <input class="form-control" type="text" name="eventStartTime" value={{startTime}} /> <br/>
      </div>
    </div>
    <div class="form-group">
      <label for="eventEndDate" class="col-sm-2 control-label">End date/time</label>
      <div class="col-sm-5">
        <input class="form-control" type="text" name="eventEndDate" value={{endDate}} />
      </div>
      <div class="col-sm-5">
        <input class="form-control" type="text" name="eventEndTime" value={{endTime}} /> <br/>
      </div>
    </div>
    <div class="form-group">
      <div class="col-sm-offset-2 col-sm-10">
        <input class="btn btn-primary" type="submit" value="Update">  <a href="/venueevents/{{venueId}}" class="btn btn-default">Cancel</a>
      </div>
    </div>
  </form>  
{{/with}}
</template>



<template name="VenueEventsList">
  {{#with thisVenue}}
  <h2>Events at {{name}}</h2>
    <nav class="navbar navbar-default">
      <div class="container-fluid">
        <div class="navbar-header">
          <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1" aria-expanded="false">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </button>
        </div>
        <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
          <ul class="nav navbar-nav">
            <li><a role="button" name="addEventBtn" href="/addevent/{{this._id}}">
              <span class="glyphicon glyphicon-plus" aria-hidden="true"></span> Add event</a></li>
          </ul>
          <ul class="nav navbar-nav navbar-right">
            <li><a href="/venue/{{this._id}}">Return to venue</a></li>
          </ul>
        </div>
      </div><!-- /.container-fluid -->
    </nav>
  <div class="table-responsive">
    <table class="table">
      <thead>
        <tr><th>Event</th><th>Description</th><th>Start date/time</th><th>End date/time</th><th>Edit / delete</th></tr>
      </thead>
      <tbody>
        {{#each events}}
          <tr><td>{{name}}</td><td>{{description}}</td><td>{{startDate}} @ {{startTime}}</td><td>{{endDate}} @ {{endTime}}</td><td>
            <a type="button" class="btn btn-default" href="/editevent/{{this._id}}">
            <span class="glyphicon glyphicon-pencil" aria-hidden="true"></span></a>
            <button class="btn btn-default delete" ><span class="glyphicon glyphicon-remove" aria-hidden="true"></span></button>
          </td></tr>
        {{/each}}
      </tbody>
    </table>
  </div>
  {{/with}}
</template>


<template name="AddEvent">
  <h2>Add Event</h2>
  {{#with thisVenue}}
  <form class="add-event form-horizontal">
    <div class="form-group">
      <label for="eventName" class="col-sm-2 control-label">Event name</label>
      <div class="col-sm-10">
        <input class="form-control" type="text" name="eventName" placeholder="The name of your event" />
      </div>
    </div>
    <div class="form-group">
      <label for="eventDescription" class="col-sm-2 control-label">Description</label>
      <div class="col-sm-10">
        <input class="form-control" type="text" name="eventDescription" placeholder="Brief description" />
      </div>
    </div>
    <div class="form-group">
      <label for="eventStartDate" class="col-sm-2 control-label">Start date/time</label>
      <div class="col-sm-5">
        <input class="form-control" type="text" name="eventStartDate" placeholder="" />
      </div>
      <div class="col-sm-5">
        <input class="form-control" type="text" name="eventStartTime" placeholder="" /> <br/>
      </div>
    </div>
    <div class="form-group">
      <label for="eventEndDate" class="col-sm-2 control-label">End date/time</label>
      <div class="col-sm-5">
        <input class="form-control" type="text" name="eventEndDate" placeholder="" />
      </div>
      <div class="col-sm-5">
        <input class="form-control" type="text" name="eventEndTime" placeholder="" /> <br/>
      </div>
    </div>
    <div class="form-group">
      <div class="col-sm-offset-2 col-sm-10">
        <input class="btn btn-primary" type="submit" value="Save">  <a href="/event/{{_id}}" class="btn btn-default">Cancel</a>
      </div>
    </div>
  </form>  
   {{/with}}
</template>


